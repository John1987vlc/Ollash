version: '3.8'

services:
  moltbot:
    build: .
    container_name: moltbot_agent
    volumes:
      - .:/app # Mount the current project directory into the container
      - moltbot_logs:/app/logs # Persistent storage for agent logs
      - moltbot_projects:/app/generated_projects # Persistent storage for generated projects
    environment:
      # Ensure the agent connects to the ollama service at the specified external IP
      OLLAMA_HOST: ${OLLAMA_HOST:-http://localhost:11434}
      PYTHONUNBUFFERED: 1
    # Entrypoint override for specific commands (e.g., benchmark, chat mode)
    # The default command will be set in Dockerfile, but can be overridden here or in `docker run`
    # command: ["python", "run_agent.py", "--chat"] # Example: run in chat mode
    # command: ["python", "benchmark.py"] # Example: run benchmark

volumes:
  moltbot_logs:
  moltbot_projects:
